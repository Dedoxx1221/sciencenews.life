!function(){var e={5623:function(e){var t=function(e){return e.replace(/^\s+|\s+$/g,"")};e.exports=function(e){if(!e)return{};for(var r,n={},i=t(e).split("\n"),o=0;o<i.length;o++){var a=i[o],s=a.indexOf(":"),c=t(a.slice(0,s)).toLowerCase(),u=t(a.slice(s+1));"undefined"===typeof n[c]?n[c]=u:(r=n[c],"[object Array]"===Object.prototype.toString.call(r)?n[c].push(u):n[c]=[n[c],u])}return n}},2728:function(e,t){"use strict";var r=Object.prototype.hasOwnProperty;function n(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return null}}function i(e){try{return encodeURIComponent(e)}catch(t){return null}}t.stringify=function(e,t){t=t||"";var n,o,a=[];for(o in"string"!==typeof t&&(t="?"),e)if(r.call(e,o)){if((n=e[o])||null!==n&&undefined!==n&&!isNaN(n)||(n=""),o=i(o),n=i(n),null===o||null===n)continue;a.push(o+"="+n)}return a.length?t+a.join("&"):""},t.parse=function(e){for(var t,r=/([^=?#&]+)=?([^&]*)/g,i={};t=r.exec(e);){var o=n(t[1]),a=n(t[2]);null===o||null===a||o in i||(i[o]=a)}return i}}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";function e(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void r(u)}s.done?t(c):Promise.resolve(c).then(n,i)}function t(t){return function(){var r=this,n=arguments;return new Promise((function(i,o){var a=t.apply(r,n);function s(t){e(a,i,o,s,c,"next",t)}function c(t){e(a,i,o,s,c,"throw",t)}s(void 0)}))}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t){if(e){if("string"===typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){s=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(x){s=[6,x],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){a(e,t,r[t])}))}return e}function v(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(x){return!1}}function p(e,t,r){return p=v()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&f(i,r.prototype),i},p.apply(null,arguments)}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function m(e){var t="function"===typeof Map?new Map:void 0;return m=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return p(e,arguments,y(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),f(n,e)},m(e)}function g(e,t){return!t||"object"!==((r=t)&&"undefined"!==typeof Symbol&&r.constructor===Symbol?"symbol":typeof r)&&"function"!==typeof t?d(e):t;var r}var w=r(2728);function E(e){return new Promise((function(t){return setTimeout(t,e)}))}var b=r(5623),S=r.n(b);var P=["delete","get","head","options"],I=["post","put","patch"],_=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(r,e);var t=function(e){var t=v();return function(){var r,n=y(e);if(t){var i=y(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return g(this,r)}}(r);function r(e,i,o,s){var c;return n(this,r),a(d(c=t.call(this,e)),"status",void 0),a(d(c),"options",void 0),a(d(c),"result",void 0),c.name="RequestError",i&&(c.status=i),o&&(c.options=o),s&&(c.result=s),Error.captureStackTrace?Error.captureStackTrace(d(c),c.constructor):c.stack=(new Error).stack,c}return r}(m(Error));a(_,"isRequestError",!0);var A={headers:{},retryDelay:function(e){var t=1e3*Math.pow(2,e);return t+.2*t*Math.random()},responseType:"text",shouldRetry:function(){return!0},isStatusValid:function(e){return e>=200&&e<300}};var T=function e(){var t=h({},A,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});function r(e,n,i,o,a){var s,c=e,l=h({},t,n),d=!1,f=new XMLHttpRequest,v={requestStart:Date.now()};if("string"!==typeof e&&(c=e.url,l=h({},t,e)),l.baseUrl&&(c="".concat(l.baseUrl).concat(c)),l.params){var p=u(c.split("?"),1)[0],y=w.stringify(l.params,"?");c="".concat(p).concat(y)}var m,g=null!==(s=l.method)&&void 0!==s?s:i;g=null===g||void 0===g?void 0:g.toUpperCase();var b,P=null!==(m=l.data)&&void 0!==m?m:o;return"object"===typeof P&&(P=JSON.stringify(P),l.headers&&!l.headers["Content-Type"]&&(l.headers["Content-Type"]="application/json; charset=utf-8")),l.withCredentials&&(f.withCredentials=!0),l.responseType&&(f.responseType=l.responseType),l.timeout&&(b=window.setTimeout((function(){d=!0,f.abort()}),l.timeout)),new Promise((function(e,t){for(var r in f.open(g,c,!0),l.headers)f.setRequestHeader(r,l.headers[r]);f.onreadystatechange=function(){if(d)return e(new _("Request was aborted due to exceeded timeout",f.status,l));if(2===f.readyState&&(v.lookupTime=Date.now()-v.requestStart),4===f.readyState){b&&clearTimeout(b),v.requestEnd=Date.now(),v.totalTime=v.requestEnd-v.requestStart,v.responseLength=f.response.length;var t=f.response;"text"===l.responseType&&(t=function(e){try{return JSON.parse(e)}catch(t){return e}}(f.responseText));var r=S()(f.getAllResponseHeaders()),n={options:l,data:t,headers:r,timing:v,status:f.status,statusText:f.statusText,xhr:f};l.isStatusValid(f.status)||e(new _("Request failed with status code ".concat(f.status),f.status,l,n)),e(n)}},f.onerror=t,f.send(P)})).then((function(t){if(t instanceof Error){var s=null!==a&&void 0!==a?a:l.retries;if(l.shouldRetry(t)&&"number"===typeof s&&s>0){var c=Promise.resolve();if(l.retryDelay){var u=l.retries-s,d=l.retryDelay;"function"===typeof d&&(d=d(u)),c=E(d)}return c.then((function(){return r(e,n,i,o,s-1)}))}return Promise.reject(t)}return Promise.resolve(t)}))}var n=r;return n.createInstance=e,P.forEach((function(e){n[e]=function(t,n){return r(t,n,e)}})),I.forEach((function(e){n[e]=function(t,n,i){return r(t,i,e,n)}})),n}();function C(e){try{var t=window[e],r="__storage_test__";return t.setItem(r,r),t.removeItem(r),!0}catch(x){return!1}}function k(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=function(e){return e&&"object"===typeof e};return t.reduce((function(e,t){return Object.keys(t).forEach((function(r){var i,o=e[r],a=t[r];Array.isArray(o)&&Array.isArray(a)?e[r]=(i=o).concat.apply(i,k(a)):n(o)&&n(a)?e[r]=R(o,a):e[r]=a})),e}),{})}function O(e,t){var r={};for(var n in e)null!==e[n]?"object"!==typeof e[n]||Array.isArray(e[n])?r[n]=e[n]:r[n]=O(e[n],t?t[n]:void 0):t&&!(n in t)&&(r[n]=e[n]);return r}function M(e){var t={};for(var r in e)"object"===typeof e[r]&&null!==e[r]?Array.isArray(e[r])?t[r]=e[r].map((function(e){return"number"===typeof e?String(e):e})):t[r]=M(e[r]):"number"===typeof e[r]?t[r]=String(e[r]):t[r]=e[r];return t}function D(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}var L,V={development:{BASE_URL:"https://fast.vidalytics.com",TRACKING_BASE_URL:"https://stats.dev.vidalytics.com",API_URL:"https://api.dev.vidalytics.com",ANALYTICS_LICENSE_KEY:"c4834298-0629-4334-9a7d-201b35bc92ab"},production:{BASE_URL:"https://fast.vidalytics.com",TRACKING_BASE_URL:"https://stats.vidalytics.com",API_URL:"https://api.vidalytics.com",ANALYTICS_LICENSE_KEY:"d4c2598d-2c00-4d64-89ef-2dc2239df17d"}};function U(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}!function(e){e.FIRST="false",e.RETURNING="true"}(L||(L={}));var N=function e(t,r){function n(e,n,i){if("undefined"!==typeof document){"number"===typeof(i=U({},r,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var a in i)i[a]&&(o+="; "+a,!0!==i[a]&&(o+="="+i[a].split(";")[0]));return document.cookie=e+"="+t.write(n,e)+o}}return Object.create({set:n,get:function(e){if("undefined"!==typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],n={},i=0;i<r.length;i++){var o=r[i].split("="),a=o.slice(1).join("=");try{var s=decodeURIComponent(o[0]);if(n[s]=t.read(a,s),e===s)break}catch(x){}}return e?n[e]:n}},remove:function(e,t){n(e,"",U({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,U({},this.attributes,t))},withConverter:function(t){return e(U({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});function x(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))}function j(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}"function"==typeof SuppressedError&&SuppressedError;var G={exclude:[]};var B={},F={timeout:"true"},q=function(e,t){"undefined"!=typeof window&&(B[e]=t)},K=function(){return Object.fromEntries(Object.entries(B).filter((function(e){var t,r=e[0];return!(null===(t=null==G?void 0:G.exclude)||void 0===t?void 0:t.includes(r))})).map((function(e){return[e[0],(0,e[1])()]})))},H=3432918353,Y=461845907,W=3864292196,z=2246822507,Q=3266489909;function Z(e,t){return e<<t|e>>>32-t}function J(e,t){void 0===t&&(t=0);for(var r=t,n=0,i=3&e.length,o=e.length-i,a=0;a<o;)n=255&e.charCodeAt(a)|(255&e.charCodeAt(++a))<<8|(255&e.charCodeAt(++a))<<16|(255&e.charCodeAt(++a))<<24,++a,n=Z(n=Math.imul(n,H),15),r=Z(r^=n=Math.imul(n,Y),13),r=Math.imul(r,5)+W;switch(n=0,i){case 3:n^=(255&e.charCodeAt(a+2))<<16;case 2:n^=(255&e.charCodeAt(a+1))<<8;case 1:n^=255&e.charCodeAt(a),n=Z(n=Math.imul(n,H),15),r^=n=Math.imul(n,Y)}return((r=function(e){return e^=e>>>16,e=Math.imul(e,z),e^=e>>>13,(e=Math.imul(e,Q))^e>>>16}(r^=e.length))>>>0).toString(36)}function $(e,t){return new Promise((function(r){setTimeout((function(){return r(t)}),e)}))}function X(e,t,r){return Promise.all(e.map((function(e){return Promise.race([e,$(t,r)])})))}function ee(){return x(this,void 0,void 0,(function(){var e,t,r,n,i;return j(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),e=K(),t=Object.keys(e),[4,X(Object.values(e),(null==G?void 0:G.timeout)||1e3,F)];case 1:return r=o.sent(),n=r.filter((function(e){return void 0!==e})),i={},n.forEach((function(e,r){i[t[r]]=e})),[2,te(i,G.exclude||[])];case 2:throw o.sent();case 3:return[2]}}))}))}function te(e,t){var r={},n=function(n){if(e.hasOwnProperty(n)){var i=e[n];if("object"!=typeof i||Array.isArray(i))t.includes(n)||(r[n]=i);else{var o=te(i,t.map((function(e){return e.startsWith(n+".")?e.slice(n.length+1):e})));Object.keys(o).length>0&&(r[n]=o)}}};for(var i in e)n(i);return r}function re(e){for(var t=0,r=0;r<e.length;++r)t+=Math.abs(e[r]);return t}function ne(e,t,r){for(var n=[],i=0;i<e[0].data.length;i++){for(var o=[],a=0;a<e.length;a++)o.push(e[a].data[i]);n.push(ie(o))}var s=new Uint8ClampedArray(n);return new ImageData(s,t,r)}function ie(e){if(0===e.length)return 0;for(var t={},r=0,n=e;r<n.length;r++)t[o=n[r]]=(t[o]||0)+1;var i=e[0];for(var o in t)t[o]>t[i]&&(i=parseInt(o,10));return i}function oe(){if("undefined"==typeof navigator)return{name:"unknown",version:"unknown"};for(var e=navigator.userAgent,t={Edg:"Edge",OPR:"Opera"},r=0,n=[/(?<name>Edge|Edg)\/(?<version>\d+(?:\.\d+)?)/,/(?<name>(?:Chrome|Chromium|OPR|Opera|Vivaldi|Brave))\/(?<version>\d+(?:\.\d+)?)/,/(?<name>(?:Firefox|Waterfox|Iceweasel|IceCat))\/(?<version>\d+(?:\.\d+)?)/,/(?<name>Safari)\/(?<version>\d+(?:\.\d+)?)/,/(?<name>MSIE|Trident|IEMobile).+?(?<version>\d+(?:\.\d+)?)/,/(?<name>[A-Za-z]+)\/(?<version>\d+(?:\.\d+)?)/,/(?<name>SamsungBrowser)\/(?<version>\d+(?:\.\d+)?)/];r<n.length;r++){var i=n[r],o=e.match(i);if(o&&o.groups)return{name:t[o.groups.name]||o.groups.name,version:o.groups.version}}return{name:"unknown",version:"unknown"}}q("audio",(function(){return x(this,void 0,void 0,(function(){return j(this,(function(e){return[2,new Promise((function(e,t){try{var r=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(1,5e3,44100),n=r.createBufferSource(),i=r.createOscillator();i.frequency.value=1e3;var o,a=r.createDynamicsCompressor();a.threshold.value=-50,a.knee.value=40,a.ratio.value=12,a.attack.value=0,a.release.value=.2,i.connect(a),a.connect(r.destination),i.start(),r.oncomplete=function(t){o=t.renderedBuffer.getChannelData(0),e({sampleHash:re(o),oscillator:i.type,maxChannels:r.destination.maxChannelCount,channelCountMode:n.channelCountMode})},r.startRendering()}catch(e){console.error("Error creating audio fingerprint:",e),t(e)}}))]}))}))}));var ae="SamsungBrowser"!==oe().name?1:3;"Firefox"!=oe().name&&q("canvas",(function(){return document.createElement("canvas").getContext("2d"),new Promise((function(e){var t=Array.from({length:ae},(function(){return function(){var e=document.createElement("canvas"),t=e.getContext("2d");if(!t)return new ImageData(1,1);e.width=280,e.height=20;var r=t.createLinearGradient(0,0,e.width,e.height);r.addColorStop(0,"red"),r.addColorStop(1/6,"orange"),r.addColorStop(2/6,"yellow"),r.addColorStop(.5,"green"),r.addColorStop(4/6,"blue"),r.addColorStop(5/6,"indigo"),r.addColorStop(1,"violet"),t.fillStyle=r,t.fillRect(0,0,e.width,e.height);var n="Random Text WMwmil10Oo";return t.font="23.123px Arial",t.fillStyle="black",t.fillText(n,-5,15),t.fillStyle="rgba(0, 0, 255, 0.5)",t.fillText(n,-3.3,17.7),t.beginPath(),t.moveTo(0,0),t.lineTo(2*e.width/7,e.height),t.strokeStyle="white",t.lineWidth=2,t.stroke(),t.getImageData(0,0,e.width,e.height)}()}));e({commonImageDataHash:J(ne(t,280,20).data.toString()).toString()})}))}));var se,ce=["Arial","Arial Black","Arial Narrow","Arial Rounded MT","Arimo","Archivo","Barlow","Bebas Neue","Bitter","Bookman","Calibri","Cabin","Candara","Century","Century Gothic","Comic Sans MS","Constantia","Courier","Courier New","Crimson Text","DM Mono","DM Sans","DM Serif Display","DM Serif Text","Dosis","Droid Sans","Exo","Fira Code","Fira Sans","Franklin Gothic Medium","Garamond","Geneva","Georgia","Gill Sans","Helvetica","Impact","Inconsolata","Indie Flower","Inter","Josefin Sans","Karla","Lato","Lexend","Lucida Bright","Lucida Console","Lucida Sans Unicode","Manrope","Merriweather","Merriweather Sans","Montserrat","Myriad","Noto Sans","Nunito","Nunito Sans","Open Sans","Optima","Orbitron","Oswald","Pacifico","Palatino","Perpetua","PT Sans","PT Serif","Poppins","Prompt","Public Sans","Quicksand","Rajdhani","Recursive","Roboto","Roboto Condensed","Rockwell","Rubik","Segoe Print","Segoe Script","Segoe UI","Sora","Source Sans Pro","Space Mono","Tahoma","Taviraj","Times","Times New Roman","Titillium Web","Trebuchet MS","Ubuntu","Varela Round","Verdana","Work Sans"],ue=["monospace","sans-serif","serif"];function le(e,t){if(!e)throw new Error("Canvas context not supported");return e.font,e.font="72px ".concat(t),e.measureText("WwMmLli0Oo").width}function de(){var e,t=document.createElement("canvas"),r=null!==(e=t.getContext("webgl"))&&void 0!==e?e:t.getContext("experimental-webgl");if(r&&"getParameter"in r){var n=r.getExtension("WEBGL_debug_renderer_info");return{vendor:(r.getParameter(r.VENDOR)||"").toString(),vendorUnmasked:n?(r.getParameter(n.UNMASKED_VENDOR_WEBGL)||"").toString():"",renderer:(r.getParameter(r.RENDERER)||"").toString(),rendererUnmasked:n?(r.getParameter(n.UNMASKED_RENDERER_WEBGL)||"").toString():"",version:(r.getParameter(r.VERSION)||"").toString(),shadingLanguageVersion:(r.getParameter(r.SHADING_LANGUAGE_VERSION)||"").toString()}}return"undefined"}function fe(){var e=new Float32Array(1),t=new Uint8Array(e.buffer);return e[0]=1/0,e[0]=e[0]-e[0],t[3]}function he(){var e=[],t={"prefers-contrast":["high","more","low","less","forced","no-preference"],"any-hover":["hover","none"],"any-pointer":["none","coarse","fine"],pointer:["none","coarse","fine"],hover:["hover","none"],update:["fast","slow"],"inverted-colors":["inverted","none"],"prefers-reduced-motion":["reduce","no-preference"],"prefers-reduced-transparency":["reduce","no-preference"],scripting:["none","initial-only","enabled"],"forced-colors":["active","none"]};return Object.keys(t).forEach((function(r){t[r].forEach((function(t){matchMedia("(".concat(r,": ").concat(t,")")).matches&&e.push("".concat(r,": ").concat(t))}))})),e}function ve(){if("https:"===window.location.protocol&&"function"==typeof window.ApplePaySession)try{for(var e=window.ApplePaySession.supportsVersion,t=15;t>0;t--)if(e(t))return t}catch(e){return 0}return 0}"Firefox"!=oe().name&&q("fonts",(function(){var e=this;return new Promise((function(t,r){try{!function(e){var t;x(this,void 0,void 0,(function(){var r,n,i;return j(this,(function(o){switch(o.label){case 0:return document.body?[3,2]:[4,(50,new Promise((function(e){return setTimeout(e,50,undefined)})))];case 1:return o.sent(),[3,0];case 2:if((r=document.createElement("iframe")).setAttribute("frameBorder","0"),(n=r.style).setProperty("position","fixed"),n.setProperty("display","block","important"),n.setProperty("visibility","visible"),n.setProperty("border","0"),n.setProperty("opacity","0"),r.src="about:blank",document.body.appendChild(r),!(i=r.contentDocument||(null===(t=r.contentWindow)||void 0===t?void 0:t.document)))throw new Error("Iframe document is not accessible");return e({iframe:i}),setTimeout((function(){document.body.removeChild(r)}),0),[2]}}))}))}((function(r){var n=r.iframe;return x(e,void 0,void 0,(function(){var e,r,i,o;return j(this,(function(a){return e=n.createElement("canvas"),r=e.getContext("2d"),i=ue.map((function(e){return le(r,e)})),o={},ce.forEach((function(e){var t=le(r,e);i.includes(t)||(o[e]=t)})),t(o),[2]}))}))}))}catch(x){r({error:"unsupported"})}}))})),q("hardware",(function(){return new Promise((function(e,t){var r=void 0!==navigator.deviceMemory?navigator.deviceMemory:0,n=window.performance&&window.performance.memory?window.performance.memory:0;e({videocard:de(),architecture:fe(),deviceMemory:r.toString()||"undefined",jsHeapSizeLimit:n.jsHeapSizeLimit||0})}))})),q("locales",(function(){return new Promise((function(e){e({languages:navigator.language,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone})}))})),q("permissions",(function(){return x(this,void 0,void 0,(function(){var e;return j(this,(function(t){return se=(null==G?void 0:G.permissions_to_check)||["accelerometer","accessibility","accessibility-events","ambient-light-sensor","background-fetch","background-sync","bluetooth","camera","clipboard-read","clipboard-write","device-info","display-capture","gyroscope","geolocation","local-fonts","magnetometer","microphone","midi","nfc","notifications","payment-handler","persistent-storage","push","speaker","storage-access","top-level-storage-access","window-management","query"],e=Array.from({length:(null==G?void 0:G.retries)||3},(function(){return function(){return x(this,void 0,void 0,(function(){var e,t,r,n,i;return j(this,(function(o){switch(o.label){case 0:e={},t=0,r=se,o.label=1;case 1:if(!(t<r.length))return[3,6];n=r[t],o.label=2;case 2:return o.trys.push([2,4,,5]),[4,navigator.permissions.query({name:n})];case 3:return i=o.sent(),e[n]=i.state.toString(),[3,5];case 4:return o.sent(),[3,5];case 5:return t++,[3,1];case 6:return[2,e]}}))}))}()})),[2,Promise.all(e).then((function(e){return function(e,t){var r={};return t.forEach((function(t){var n=function(e){if(0===e.length)return null;var t={};e.forEach((function(e){var r=String(e);t[r]=(t[r]||0)+1}));var r=e[0],n=1;return Object.keys(t).forEach((function(e){t[e]>n&&(r=e,n=t[e])})),r}(e.map((function(e){return t in e?e[t]:void 0})).filter((function(e){return void 0!==e})));n&&(r[t]=n)})),r}(e,se)}))]}))}))})),q("plugins",(function(){var e=[];if(navigator.plugins)for(var t=0;t<navigator.plugins.length;t++){var r=navigator.plugins[t];e.push([r.name,r.filename,r.description].join("|"))}return new Promise((function(t){t({plugins:e})}))})),q("screen",(function(){return new Promise((function(e){e({is_touchscreen:navigator.maxTouchPoints>0,maxTouchPoints:navigator.maxTouchPoints,colorDepth:screen.colorDepth,mediaMatches:he()})}))})),q("system",(function(){return new Promise((function(e){var t=oe();e({platform:window.navigator.platform,cookieEnabled:window.navigator.cookieEnabled,productSub:navigator.productSub,product:navigator.product,useragent:navigator.userAgent,browser:{name:t.name,version:t.version},applePayVersion:ve()})}))}));var pe,ye="SamsungBrowser"!==oe().name?1:3,me=null;"undefined"!=typeof document&&((pe=document.createElement("canvas")).width=200,pe.height=100,me=pe.getContext("webgl")),q("webgl",(function(){return x(this,void 0,void 0,(function(){var e;return j(this,(function(t){try{if(!me)throw new Error("WebGL not supported");return e=Array.from({length:ye},(function(){return function(){try{if(!me)throw new Error("WebGL not supported");var t=me.createShader(me.VERTEX_SHADER),r=me.createShader(me.FRAGMENT_SHADER);if(!t||!r)throw new Error("Failed to create shaders");if(me.shaderSource(t,"\n          attribute vec2 position;\n          void main() {\n              gl_Position = vec4(position, 0.0, 1.0);\n          }\n      "),me.shaderSource(r,"\n          precision mediump float;\n          void main() {\n              gl_FragColor = vec4(0.812, 0.195, 0.553, 0.921); // Set line color\n          }\n      "),me.compileShader(t),!me.getShaderParameter(t,me.COMPILE_STATUS))throw new Error("Vertex shader compilation failed: "+me.getShaderInfoLog(t));if(me.compileShader(r),!me.getShaderParameter(r,me.COMPILE_STATUS))throw new Error("Fragment shader compilation failed: "+me.getShaderInfoLog(r));var n=me.createProgram();if(!n)throw new Error("Failed to create shader program");if(me.attachShader(n,t),me.attachShader(n,r),me.linkProgram(n),!me.getProgramParameter(n,me.LINK_STATUS))throw new Error("Shader program linking failed: "+me.getProgramInfoLog(n));me.useProgram(n);for(var i=137,o=new Float32Array(548),a=2*Math.PI/i,s=0;s<i;s++){var c=s*a;o[4*s]=0,o[4*s+1]=0,o[4*s+2]=Math.cos(c)*(pe.width/2),o[4*s+3]=Math.sin(c)*(pe.height/2)}var u=me.createBuffer();me.bindBuffer(me.ARRAY_BUFFER,u),me.bufferData(me.ARRAY_BUFFER,o,me.STATIC_DRAW);var l=me.getAttribLocation(n,"position");me.enableVertexAttribArray(l),me.vertexAttribPointer(l,2,me.FLOAT,!1,0,0),me.viewport(0,0,pe.width,pe.height),me.clearColor(0,0,0,1),me.clear(me.COLOR_BUFFER_BIT),me.drawArrays(me.LINES,0,274);var d=new Uint8ClampedArray(pe.width*pe.height*4);return me.readPixels(0,0,pe.width,pe.height,me.RGBA,me.UNSIGNED_BYTE,d),new ImageData(d,pe.width,pe.height)}catch(e){return new ImageData(1,1)}finally{me&&(me.bindBuffer(me.ARRAY_BUFFER,null),me.useProgram(null),me.viewport(0,0,me.drawingBufferWidth,me.drawingBufferHeight),me.clearColor(0,0,0,0))}}()})),[2,{commonImageHash:J(ne(e,pe.width,pe.height).data.toString()).toString()}]}catch(e){return[2,{webgl:"unsupported"}]}return[2]}))}))}));var ge=function(e,t,r,n){for(var i=(r-t)/n,o=0,a=0;a<n;a++)o+=e(t+(a+.5)*i);return o*i};q("math",(function(){return x(void 0,void 0,void 0,(function(){return j(this,(function(e){return[2,{acos:Math.acos(.5),asin:ge(Math.asin,-1,1,97),atan:ge(Math.atan,-1,1,97),cos:ge(Math.cos,0,Math.PI,97),cosh:Math.cosh(9/7),e:Math.E,largeCos:Math.cos(1e20),largeSin:Math.sin(1e20),largeTan:Math.tan(1e20),log:Math.log(1e3),pi:Math.PI,sin:ge(Math.sin,-Math.PI,Math.PI,97),sinh:ge(Math.sinh,-9/7,7/9,97),sqrt:Math.sqrt(2),tan:ge(Math.tan,0,2*Math.PI,97),tanh:ge(Math.tanh,-9/7,7/9,97)}]}))}))}));var we=3432918353,Ee=461845907,be=2246822507,Se=3266489909;function Pe(e,t){return e<<t|e>>>32-t}var Ie=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=0,n=3&e.length,i=e.length-n,o=0;o<i;)r=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24,++o,r=Pe(r=Math.imul(r,we),15),t=Pe(t^=r=Math.imul(r,Ee),13),t=Math.imul(t,5)+3864292196;switch(r=0,n){case 3:r^=(255&e.charCodeAt(o+2))<<16;case 2:r^=(255&e.charCodeAt(o+1))<<8;case 1:r^=255&e.charCodeAt(o),r=Pe(r=Math.imul(r,we),15),t^=r=Math.imul(r,Ee)}return((t=function(e){return e^=e>>>16,e=Math.imul(e,be),e^=e>>>13,e=Math.imul(e,Se),e^e>>>16}(t^=e.length))>>>0).toString(36)};function _e(e){if(e)return Ie(JSON.stringify(e))}function Ae(){return(Ae=t((function(){var e,t,r,n,i,o,a,s,c,u,d,f,h,v,p,y,m,g,w,E,b,S;return l(this,(function(l){switch(l.label){case 0:return[4,ee()];case 1:return S=l.sent(),[2,O(M({c:null===(e=S.canvas)||void 0===e?void 0:e.commonImageDataHash,a:{s:null===(t=S.audio)||void 0===t?void 0:t.sampleHash,o:null===(r=S.audio)||void 0===r?void 0:r.oscillator,m:null===(n=S.audio)||void 0===n?void 0:n.maxChannels,c:null===(i=S.audio)||void 0===i?void 0:i.channelCountMode},h:{v:_e(null===(o=S.hardware)||void 0===o?void 0:o.videocard),a:null===(a=S.hardware)||void 0===a?void 0:a.architecture,d:null===(s=S.hardware)||void 0===s?void 0:s.deviceMemory,h:null===(c=S.hardware)||void 0===c?void 0:c.jsHeapSizeLimit},f:_e(S.fonts),l:{l:null===(u=S.locales)||void 0===u?void 0:u.languages,t:null===(d=S.locales)||void 0===d?void 0:d.timezone},p:_e(S.permissions),pl:_e(S.plugins),s:{i:!!(null===(f=S.screen)||void 0===f?void 0:f.is_touchscreen),m:null===(h=S.screen)||void 0===h?void 0:h.maxTouchPoints,c:null===(v=S.screen)||void 0===v?void 0:v.colorDepth,mm:_e(null===(p=S.screen)||void 0===p?void 0:p.mediaMatches)},sy:{p:null===(y=S.system)||void 0===y?void 0:y.platform,c:!!(null===(m=S.system)||void 0===m?void 0:m.cookieEnabled),ps:null===(g=S.system)||void 0===g?void 0:g.productSub,pr:null===(w=S.system)||void 0===w?void 0:w.product,a:null===(E=S.system)||void 0===E?void 0:E.applePayVersion},w:null===(b=S.webgl)||void 0===b?void 0:b.commonImageHash,m:_e(S.math)}))]}}))}))).apply(this,arguments)}var Te,Ce=function(){return Ae.apply(this,arguments)};!function(e){e.CONVERSION="Vidalytics.EVENT_CONVERSION",e.CTA_CLICKED="Vidalytics.Player.EVENT_CTA_CLICKED",e.CTA_DISPLAYED="Vidalytics.Player.EVENT_CTA_DISPLAYED",e.CTA_HIDDEN="Vidalytics.Player.EVENT_CTA_HIDDEN",e.FUNNEL_CHOICE_SELECTED="Vidalytics.Player.EVENT_FUNNEL_CHOICE_SELECTED",e.ERROR="Vidalytics.Player.EVENT_ERROR",e.INITIALIZED="Vidalytics.Player.EVENT_INITIALIZED",e.PAUSE="Vidalytics.Player.EVENT_PAUSE",e.PLAY="Vidalytics.Player.EVENT_PLAY",e.PLAYER_CREATED="Vidalytics.Player.EVENT_PLAYER_CREATED",e.PLAYING="Vidalytics.Player.EVENT_PLAYING",e.PLAYED="Vidalytics.Player.EVENT_PLAYED",e.PLAY_GATE="Vidalytics.Player.EVENT_PLAY_GATE",e.PLAY_GATE_SHOW="Vidalytics.Player.EVENT_PLAY_GATE_SHOW",e.PLAY_GATE_SKIPPED="Vidalytics.Player.EVENT_PLAY_GATE_SKIPPED",e.RESTART="Vidalytics.Player.EVENT_RESTART",e.RESUME="Vidalytics.Player.EVENT_RESUME",e.RESIZED="Vidalytics.Player.EVENT_RESIZED",e.STOP="Vidalytics.Player.EVENT_STOP",e.SEEK="Vidalytics.Player.EVENT_SEEK",e.SEEK_TO="Vidalytics.Player.EVENT_SEEK_TO",e.TRIGGER="Vidalytics.Player.EVENT_TRIGGER",e.TIME_CHANGED="Vidalytics.Player.EVENT_TIME_CHANGED",e.UNMUTE="Vidalytics.Player.UNMUTE",e.VIDEO_FULLSCREEN="Vidalytics.Player.EVENT_VIDEO_FULLSCREEN",e.VIDEO_FULLSCREEN_CLOSE="Vidalytics.Player.EVENT_VIDEO_FULLSCREEN_CLOSE",e.RESOLUTION_CHANGED="Vidalytics.Player.EVENT_RESOLUTION_CHANGED",e.GLOBAL_INIT="Vidalytics.Global.EVENT_INIT",e.GLOBAL_SEARCH_PARAMS="Vidalytics.Global.EVENT_SEARCH_PARAMS"}(Te||(Te={})),window.Vidalytics||(window.Vidalytics={}),window.Vidalytics.EventType||(window.Vidalytics.EventType=Te);var ke={sessionIdLength:10,sessionIdKey:"vidalytics_sid",userIdKey:"vidalytics_uid",cookieDomain:".".concat(window.location.hostname),cookieExpires:30,searchParamsKey:"_vd",retriesLimit:5,allowedEvents:[]},Re=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ke,i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;if(n(this,e),a(this,"config",void 0),a(this,"options",void 0),a(this,"sessionId",void 0),a(this,"userId",void 0),a(this,"isReturningViewerKey",void 0),a(this,"messageQueue",[]),a(this,"allowedEvents",void 0),a(this,"request",void 0),a(this,"isPending",!1),a(this,"isDisconnected",!1),a(this,"isInitialized",!1),a(this,"localStorageEnabled",C("localStorage")),a(this,"sessionStorageEnabled",C("sessionStorage")),this.config=t,this.options=h({},ke,r),this.allowedEvents=r.allowedEvents,i||o){var s=i?"funnel":"video",c=i||o;this.isReturningViewerKey="vidalytics_".concat(s,"_").concat(c,"_is_returning")}var u={baseUrl:this.config.url,retries:this.options.retriesLimit};this.request=T.createInstance(u),this.initSession(),this.initUser()}return o(e,[{key:"getDefaultMessage",value:function(){var e=this.config;return{customerId:e.customerId,videoId:e.videoId,timestamp:this.getTimestamp(),sessionId:this.sessionId,userId:this.userId,player:"hls"}}},{key:"enqueueMessage",value:function(e){var t=this.options.onEnqueue,r=h({},this.getDefaultMessage(),e);this.messageQueue.push(r),null===t||void 0===t||t(r),this.dequeueMessage()}},{key:"dequeueMessage",value:function(){var e=this;return t((function(){var t,r,n,i,o;return l(this,(function(a){switch(a.label){case 0:if(!e.isInitialized||!e.userId)return[2];if(e.isPending)return[2];if(e.isDisconnected)return[2];if(e.isMessageQueueEmpty)return[2];t=e.options.onDequeue,a.label=1;case 1:return a.trys.push([1,3,,4]),r=u(e.allowedMessageQueue,1),(n=r[0])?(i=D(h({},n),{userId:e.userId}),null===t||void 0===t||t(i),e.isPending=!0,[4,e.dispatchMessage(i)]):[2];case 2:return a.sent(),e.deleteMessage(n),[3,4];case 3:return o=a.sent(),console.error(o),e.handleDisconnect(),[3,4];case 4:return e.isPending=!1,e.dequeueMessage(),[2]}}))}))()}},{key:"deleteMessage",value:function(e){var t=this.messageQueue.indexOf(e);t<0||this.messageQueue.splice(t,1)}},{key:"dispatchMessage",value:function(e){var r=this;return t((function(){var t,n;return l(this,(function(i){switch(i.label){case 0:return t=r.options.onDispatch,n={"Content-Type":"text/plain; charset=utf-8"},[4,r.request.post("/scribe",e,{headers:n})];case 1:return i.sent(),null===t||void 0===t||t(e),[2]}}))}))()}},{key:"handleConnect",value:function(){this.isDisconnected=!1,this.dequeueMessage()}},{key:"handleInit",value:function(){this.isInitialized=!0,this.dequeueMessage()}},{key:"handleDisconnect",value:function(){this.isDisconnected=!0,this.initHealthCheck()}},{key:"initHealthCheck",value:function(){var e=this;return t((function(){var t;return l(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e.request.get("/ping")];case 1:return r.sent(),e.isInitialized?(e.handleConnect(),[3,3]):(e.initUser(),[2]);case 2:return t=r.sent(),console.error(t),[3,3];case 3:return[2]}}))}))()}},{key:"initSession",value:function(){var e=this.options,t=e.sessionIdKey,r=e.sessionIdLength,n=this.getSessionId();if(n)return this.sessionId=n,void this.saveSessionId(n);var i=((e=21)=>{let t="",r=crypto.getRandomValues(new Uint8Array(e));for(;e--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&r[e]];return t})(r);this.sessionId=i,sessionStorage.setItem(t,i)}},{key:"initUser",value:function(){var e=this;return t((function(){var t,r,n,i,o,a,s,c,u,d,f,h,v,p,y,m,g,w;return l(this,(function(l){switch(l.label){case 0:if(t=e.config.customerId,r=e.getUserId())return e.userId=r,e.saveUserId(r),e.isReturningViewerKey&&!localStorage.getItem(e.isReturningViewerKey)&&localStorage.setItem(e.isReturningViewerKey,L.FIRST),e.handleInit(),[2];l.label=1;case 1:return l.trys.push([1,6,,7]),u=null===(i=window._vidalytics)||void 0===i||null===(n=i.tracking)||void 0===n?void 0:n.userInitPromise,d=null===(a=window._vidalytics)||void 0===a||null===(o=a.tracking)||void 0===o?void 0:o.hasUserInitError,!u||d?[3,3]:[4,u];case 2:return l.sent(),e.initUser(),[2];case 3:return f=new Promise((function(e){window._vidalytics||(window._vidalytics={}),window._vidalytics.tracking||(window._vidalytics.tracking={}),window._vidalytics.tracking.resolveUserInitPromise||(window._vidalytics.tracking.resolveUserInitPromise=e)})),h=null===(c=window._vidalytics)||void 0===c||null===(s=c.tracking)||void 0===s?void 0:s.resolveUserInitPromise,window._vidalytics||(window._vidalytics={}),window._vidalytics.tracking||(window._vidalytics.tracking={}),window._vidalytics.tracking.userInitPromise=f,window._vidalytics.tracking.hasUserInitError=!1,v={cid:t},[4,Ce()];case 4:return p=l.sent(),y={fp:p},[4,e.request.post("/awesome-log",y,{params:v})];case 5:return(null===(m=l.sent().data)||void 0===m?void 0:m.userId)&&(g=m.userId,e.userId=g,e.saveUserId(g),e.isReturningViewerKey&&localStorage.setItem(e.isReturningViewerKey,L.FIRST),e.handleInit(),null===h||void 0===h||h()),[3,7];case 6:return w=l.sent(),window._vidalytics||(window._vidalytics={}),window._vidalytics.tracking||(window._vidalytics.tracking={}),window._vidalytics.tracking.hasUserInitError=!0,w&&console.error(w),e.initHealthCheck(),[3,7];case 7:return[2]}}))}))()}},{key:"getUserIdFromEntityTag",value:function(e){return u(/^"(.+)\/(.+)"$/.exec(e),3)[2]}},{key:"parseSearchParamUserIds",value:function(e){if(!e)return{};var t=u(e.split(","),2);return{userId:t[0],sessionId:t[1]}}},{key:"getUserId",value:function(){var e,t=this.options,r=t.userIdKey,n=t.searchParamsKey,i=new URLSearchParams(window.location.search).get(n);i&&(e=this.parseSearchParamUserIds(i).userId);return e||this.localStorageEnabled&&(e=localStorage.getItem(r)),e||(e=N.get(r)),e}},{key:"saveUserId",value:function(e){var t=this.options,r=t.userIdKey,n=t.cookieExpires,i=t.cookieDomain;this.localStorageEnabled&&localStorage.setItem(r,e),N.set(r,e,{expires:n,domain:i})}},{key:"getSessionId",value:function(){var e,t=this.options,r=t.sessionIdKey,n=t.searchParamsKey,i=new URLSearchParams(window.location.search).get(n);i&&(e=this.parseSearchParamUserIds(i).sessionId);return e||this.sessionStorageEnabled&&(e=sessionStorage.getItem(r)),e}},{key:"saveSessionId",value:function(e){var t=this.options.sessionIdKey;this.sessionStorageEnabled&&sessionStorage.setItem(t,e)}},{key:"cleanupSearchParams",value:function(){var e=this.options.searchParamsKey,t=new URL(window.location.href);t.searchParams.has(e)&&(t.searchParams.delete(e),window.history.replaceState({},"",t.toString()))}},{key:"getTimestamp",value:function(){return Math.floor(Date.now()/1e3)}},{key:"setAllowedEvents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.allowedEvents=e,this.dequeueMessage()}},{key:"allowedMessageQueue",get:function(){var e=this;return 0===this.allowedEvents.length?this.messageQueue:this.messageQueue.filter((function(t){return e.allowedEvents.includes(t.event)}))}},{key:"isMessageQueueEmpty",get:function(){return 0===this.messageQueue.length}}]),e}(),Oe=Re;var Me=function(e){if(!e)return"production";try{return/[.-]dev\.?/gi.test(e)?"development":"production"}catch(t){return"production"}};function De(e){return Le.apply(this,arguments)}function Le(){return Le=t((function(e){var t,r,n=arguments;return l(this,(function(i){switch(i.label){case 0:return t=n.length>1&&void 0!==n[1]?n[1]:{},r=n.length>2&&void 0!==n[2]?n[2]:{},!function(e){var t;return!(null===e||void 0===e?void 0:e.saveData)&&!(null===e||void 0===e||null===(t=e.effectiveType)||void 0===t?void 0:t.includes("2g"))}(navigator.connection)&&!t.ignoreNetwork?[2]:(t.baseUrl&&(e="".concat(t.baseUrl).concat(e)),t.delayMs?[4,E(t.delayMs)]:[3,2]);case 1:i.sent(),i.label=2;case 2:return function(){var e,t,r=document.createElement("link");return!!(null===r||void 0===r||null===(t=r.relList)||void 0===t||null===(e=t.supports)||void 0===e?void 0:e.call(t,"prefetch"))}()||t.forceLink?[2,new Promise((function(t,n){var i=document.createElement("link");for(var o in i.rel="prefetch",i.href=e,i.onload=t,i.onerror=n,r)i[o]=r[o];document.head.appendChild(i)}))]:[2,T.get(e)]}}))})),Le.apply(this,arguments)}var Ve={hasPrefetch:!0,prefetchDelay:1e3,prefetchBaseDelay:3e3,hasCrossDomainLinks:!0,ignoreInternalLinks:!0,searchParamsKey:"_vd",baseUrl:"https://fast.vidalytics.com",trackingUrl:"https://stats.dev.vidalytics.com"},Ue=function(){function e(){var r=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,e),a(this,"config",void 0),a(this,"customerId",void 0),a(this,"env",void 0),a(this,"tracking",void 0),a(this,"scriptElement",void 0),a(this,"localStorageEnabled",C("localStorage")),a(this,"sessionStorageEnabled",C("sessionStorage"));var o=this;a(this,"handlePrefetch",t((function(){var e,t,r,n,i,a,s,c,u;return l(this,(function(l){switch(l.label){case 0:return e=o.config,t=e.prefetchBaseDelay,r=e.prefetchDelay,De(n=e.baseUrl,{ignoreNetwork:!0,forceLink:!0},{rel:"preconnect"}),[4,E(t)];case 1:return l.sent(),o.isPrefetchForbidden?[2]:[4,o.fetchResourceConfig()];case 2:if(i=l.sent(),!(a=null===i||void 0===i?void 0:i.assets)||0===a.length)return[2];s=0,l.label=3;case 3:if(!(s<a.length))return[3,9];c=a[s],l.label=4;case 4:return l.trys.push([4,7,,8]),[4,E(r*(s+1))];case 5:return l.sent(),o.isPrefetchForbidden?[2]:[4,De(c,{baseUrl:n})];case 6:return l.sent(),[3,8];case 7:return u=l.sent(),console.warn("[Vidalytics Global Script] Failed to prefetch the asset at `".concat(c,"`."),u),[3,8];case 8:return s++,[3,3];case 9:return[2]}}))}))),a(this,"handleDocumentMouseDown",(function(e){var t=r.config,n=t.searchParamsKey,i=t.ignoreInternalLinks,o=r.tracking,s=o.userId,c=o.sessionId;if(s){for(var u=e.target,l=0;l<100&&(u&&"A"!==u.nodeName);l++)u=u.parentElement;if(u&&"A"===u.nodeName){var d=u.getAttribute("href");if(d){var f=new URL(d,window.location.href),h=f.host!==window.location.host;if(!i||h){var v=s;c&&(v+=",".concat(c));var p=a({},n,v),y=new URLSearchParams(p).toString();if(!f.searchParams.has(n)){var m=f.searchParams.size>0?"&":"?",g=d.replace(/(#[^?]*|$)/,"".concat(m).concat(y,"$1"));u.setAttribute("href",g)}}}}}})),this.config=R(Ve,i),this.scriptElement=this.getScriptElement(),this.customerId=this.getCustomerId(),this.env=this.getEnvironment();var s=this.getTrackingUrl();this.tracking=new Oe({url:s,customerId:this.customerId},this.config.trackingOptions)}return o(e,[{key:"init",value:function(){var e=this;return t((function(){var t,r,n;return l(this,(function(i){return t=e.config,r=t.hasPrefetch,n=t.hasCrossDomainLinks,e.initUrlSearchParams(),n&&e.initCrossDomainLinks(),r&&e.initPrefetch(),[2]}))}))()}},{key:"initCrossDomainLinks",value:function(){document.addEventListener("mousedown",this.handleDocumentMouseDown)}},{key:"initUrlSearchParams",value:function(){var e=window.location.search,t=Object.fromEntries(new URLSearchParams(e));0===Object.keys(t).length||this.tracking.enqueueMessage({event:Te.GLOBAL_SEARCH_PARAMS,referer:document.referrer,site:window.location.href,data:t})}},{key:"initPrefetch",value:function(){var e=this;return t((function(){return l(this,(function(t){switch(t.label){case 0:return"complete"===document.readyState?[4,e.handlePrefetch()]:[3,2];case 1:return t.sent(),[3,3];case 2:window.addEventListener("load",e.handlePrefetch),t.label=3;case 3:return[2]}}))}))()}},{key:"fetchResourceConfig",value:function(){var e=this;return t((function(){var t,r,n,i,o;return l(this,(function(a){switch(a.label){case 0:if(!e.customerId)return[2];t=e.config,r=t.baseUrl,n=t.prefetchBaseDelay,i={hash:window.location.href},a.label=1;case 1:return a.trys.push([1,3,,4]),[4,T.get("/global/".concat(e.customerId,"/prefetch.json"),{baseUrl:r,params:i,retries:2,retryDelay:n})];case 2:return[2,a.sent().data];case 3:return o=a.sent(),console.error("[Vidalytics Global Script] Failed to load the list of assets for Customer ID `".concat(e.customerId,"`."),o),[3,4];case 4:return[2]}}))}))()}},{key:"parseSearchParamUserIds",value:function(e){if(!e)return{};var t=u(e.split(","),2);return{userId:t[0],sessionId:t[1]}}},{key:"cleanupSearchParams",value:function(){var e=this.config.searchParamsKey,t=new URL(window.location.href);t.searchParams.has(e)&&(t.searchParams.delete(e),window.history.replaceState({},"",t.toString()))}},{key:"getScriptElement",value:function(){var e=document.querySelector('script[id^="vid_glb_"]');return e||(e=document.querySelector("script[data-cid]"))}},{key:"getCustomerId",value:function(){var e;if(this.scriptElement){var t=this.scriptElement.dataset.cid;return t||(t=null===(e=this.scriptElement.id)||void 0===e?void 0:e.replace("vid_glb_",""))}}},{key:"getTrackingUrl",value:function(){return V[this.env].TRACKING_BASE_URL}},{key:"getEnvironment",value:function(){var e;return Me(null===(e=this.scriptElement)||void 0===e?void 0:e.src)}},{key:"isPrefetchForbidden",get:function(){var e;return!!window.VidalyticsL||(!!window.VidalyticsC||(!!(null===(e=window._vidalytics)||void 0===e?void 0:e.embeds)&&Object.keys(window._vidalytics.embeds).length>0||(!!document.querySelector('[id^="vidalytics_embed"]')||(!!document.querySelector('script[src*="vidalytics"][src*="loader.min.js"]')||(!!document.querySelector('script[src*="vidalytics"][src*="conversion.min.js"]')||!(!document.querySelector('script[data-vidalytics][src^="blob"]')&&!document.querySelector('script[src*="vidalytics"][src*="player.min.js"]')))))))}},{key:"destroy",value:function(){document.removeEventListener("mousedown",this.handleDocumentMouseDown),window.removeEventListener("load",this.handlePrefetch)}}],[{key:"isInjectedToGlobal",get:function(){var e;return!!(null===(e=window.Vidalytics)||void 0===e?void 0:e.GlobalScript)}},{key:"injectToGlobal",value:function(){window.Vidalytics||(window.Vidalytics={}),window.Vidalytics.GlobalScript=e}}]),e}(),Ne=Ue;!function(){if(!Ne.isInjectedToGlobal){Ne.injectToGlobal(),window._vidalytics||(window._vidalytics={}),window._vidalytics.global||(window._vidalytics.global={}),window._vidalytics.global.wasInitialized=!0;var e=window._vidalytics.global.config;new Ne(e).init()}}()}()}();